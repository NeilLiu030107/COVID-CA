mutate(incidence_in_thousands= positive_tests/population*1000, fatality= cumulative_deaths/cumulative_cases)
# Adding prevalence and mortality to data
data <- data %>%
mutate(cases_per_thousands= cumulative_cases/population*1000, fatality= cumulative_deaths/cumulative_cases)
View(data)
# Statewide COVID-19 Data from https://data.ca.gov/dataset/covid-19-time-series-metrics-by-county-and-state1/resource/6a1aaf21-2a2c-466b-8738-222aaceaa168
data <- read.csv("covid-data/covid19cases_test.csv")
# Adding prevalence and mortality to data
data <- data %>%
mutate(cases_per_thousands= cumulative_cases/population*1000, fatality= cumulative_deaths/cumulative_cases)
#CA
cov_ca <- rgdal::readOGR(url("https://services6.arcgis.com/snwvZ3EmaoXJiugR/arcgis/rest/services/BOE_citycounty/FeatureServer/0/query?where=1%3D1&outFields=*&outSR=4326&f=json"))
#CA
cov_ca <- rgdal::readOGR("covid-data/City_and_County_Boundaries.geojson")
View(cov_ca)
cov_ca
plot(cov_ca)
#health coverage!
hospital <- readr::read_csv(url("https://raw.githubusercontent.com/datadesk/california-coronavirus-data/master/cdph-hospital-patient-county-totals.csv"))
#social distancing--from Apple
mobility_trend <- read.csv("mobility_trend.csv")
#social distancing--from Apple
mobility_trend <- read.csv("covid-data/mobility_trend.csv")
#loading libraries
library(tidyverse)
library(leaflet)
library(sp)
library(rgdal)
library(raster)
library(lubridate)
?filter()
?subset()
?subset
View(hospital)
View(mobility_trend)
ca_mobility_trend <- mobility_trend %>%
select(sub.region="California")
ca_mobility_trend <- mobility_trend %>%
select(data=.,sub.region="California")
ca_mobility_trend <- mobility_trend %>%
select(data=., sub.region="California")
?filter()
ca_mobility_trend <- mobility_trend %>%
subset(sub.region=="California")
View(ca_mobility_trend)
ca_mobility_trend <- mobility_trend %>%
subset(sub.region=="California" & geo_type=="county")
View(ca_mobility_trend)
#social distancing--from Apple
mobility_trend <- read.csv("covid-data/mobility_trend.csv")
ca_mobility_trend <- mobility_trend %>%
subset(sub.region=="California" & geo_type=="county")
View(ca_mobility_trend)
ca_mobility_trend <- mobility_trend %>%
subset(sub.region=="California" & geo_type=="county") %>%
pivot_longer(X1.13.2020:X8.10.2021, names_to = "date", values_to = "mobility_trend", values_drop_na = TRUE)
View(ca_mobility_trend)
ca_mobility_trend <- mobility_trend %>%
subset(sub.region=="California" & geo_type=="county") %>%
pivot_longer(X1.13.2020:X8.10.2021, names_to = "date", values_to = "mobility_trend", values_drop_na = TRUE) %>%
select(region, transportation_type, date, mobility trend)
ca_mobility_trend <- mobility_trend %>%
subset(sub.region=="California" & geo_type=="county") %>%
pivot_longer(X1.13.2020:X8.10.2021, names_to = "date", values_to = "mobility_trend", values_drop_na = TRUE) %>%
select(region, transportation_type, date, mobility_trend)
select()
?select
library(dplyr)
ca_mobility_trend <- mobility_trend %>%
subset(sub.region=="California" & geo_type=="county") %>%
pivot_longer(X1.13.2020:X8.10.2021, names_to = "date", values_to = "mobility_trend", values_drop_na = TRUE) %>%
select(region, transportation_type, date, mobility_trend)
summary(ca_mobility_trend)
ca_mobility_trend <- mobility_trend %>%
subset(sub.region=="California" & geo_type=="county") %>%
pivot_longer(X1.13.2020:X8.10.2021, names_to = "date", values_to = "mobility_trend", values_drop_na = TRUE) %>%
select(region, transportation_type, date, mobility_trend)
ca_mobility_trend <- mobility_trend %>%
subset(sub.region=="California" & geo_type=="county") %>%
pivot_longer(X1.13.2020:X8.10.2021, names_to = "date", values_to = "mobility_trend", values_drop_na = TRUE) %>%
filter(region, transportation_type, date, mobility_trend)
ca_mobility_trend <- ca_mobility_trend %>%
select(region, transportation_type, date, mobility_trend)
ca_mobility_trend <- ca_mobility_trend %>%
dplyr::select(region, transportation_type, date, mobility_trend)
View(ca_mobility_trend)
write.csv(ca_mobility_trend,"ca_mobility_trend.csv")
write.csv(ca_mobility_trend,"ca_mobility_trend.csv")
#social distancing--from Apple
mobility_trend <- read.csv("covid-data/mobility_trend.csv")
View(mobility_trend)
mobility_trend <- as.data.frame(mobility_trend)
View(mobility_trend)
names(mobility_trend)<-sapply(str_remove_all(colnames(mobility_trend),"X"),"[")
View(mobility_trend)
ca_mobility_trend <- mobility_trend %>%
subset(sub.region=="California" & geo_type=="county") %>%
pivot_longer(1.13.2020 : 8.10.2021, names_to = "date", values_to = "mobility_trend", values_drop_na = TRUE)
ca_mobility_trend <- mobility_trend %>%
subset(sub.region=="California" & geo_type=="county") %>%
pivot_longer("1.13.2020":"8.10.2021" , names_to = "date", values_to = "mobility_trend", values_drop_na = TRUE)
View(ca_mobility_trend)
ca_mobility_trend <- ca_mobility_trend %>%
dplyr::select(region, transportation_type, date, mobility_trend)
View(cov_ca)
View(cov_ca@data)
View(data)
View(hospital)
write.csv(ca_mobility_trend,"ca_mobility_trend.csv")
ca_mobility_trend$date <- lubridate::as_date(ca_mobility_trend$date)
ca_mobility_trend$date <- as_date(ca_mobility_trend$date)
View(data)
View(hospital)
View(hospital)
write.csv(hospital,"hospital.csv")
#loading libraries
library(tidyverse)
library(dplyr)
library(leaflet)
library(sp)
library(rgdal)
library(raster)
library(lubridate)
#night light(development level)
night_light <- raster(url("https://data.worldpop.org/GIS/Covariates/Global_2000_2020/USA/VIIRS//usa_viirs_100m_2016.tif"))
#vaccination
vac <- readr::read_csv(url("https://data.chhs.ca.gov/dataset/e283ee5a-cf18-4f20-a92c-ee94a2866ccd/resource/130d7ba2-b6eb-438d-a412-741bde207e1c/download/covid19vaccinesbycounty."))
View(mobility_trend)
View(ca_mobility_trend)
#social distancing--from Apple direction search frequency
mobility_trend <- read.csv("covid-data/mobility_trend.csv")
names(mobility_trend)<-sapply(str_remove_all(colnames(mobility_trend),"X"),"[")
#loading libraries
library(tidyverse)
library(dplyr)
library(leaflet)
library(sp)
library(rgdal)
library(raster)
library(lubridate)
#social distancing--from Apple direction search frequency
mobility_trend <- read.csv("covid-data/mobility_trend.csv")
names(mobility_trend)<-sapply(str_remove_all(colnames(mobility_trend),"X"),"[")
ca_mobility_trend <- mobility_trend %>%
subset(sub.region=="California" & geo_type=="county") %>%
pivot_longer("1.13.2020":"8.10.2021" , names_to = "date", values_to = "mobility_trend", values_drop_na = TRUE)
View(ca_mobility_trend)
ca_mobility_trend <- ca_mobility_trend %>%
dplyr::select(region, transportation_type, date, mobility_trend)
View(ca_mobility_trend)
ca_mobility_trend$date <- as_date(ca_mobility_trend$date)
#pop density!
pop_density <- read.csv("covid-data/pop_density.csv")
View(pop_density)
View(cov_ca)
View(cov_ca@data)
View(data)
# Statewide COVID-19 Data from https://data.ca.gov/dataset/covid-19-time-series-metrics-by-county-and-state1/resource/6a1aaf21-2a2c-466b-8738-222aaceaa168
data <- read.csv("covid-data/covid19cases_test.csv")
# Adding prevalence and mortality to data
data <- data %>%
mutate(cases_per_1000= cumulative_cases/population*1000, fatality= cumulative_deaths/cumulative_cases)
View(data)
#pop density!
pop_density <- read.csv("covid-data/pop_density.csv")
#health capacity https://raw.githubusercontent.com/datadesk/california-coronavirus-data/master/cdph-hospital-patient-county-totals.csv
hosiptal <- read.csv("covid-data/hospital.csv")
#vaccination
vax <- read.csv("covid-data/covid19vaccinesbycounty.csv")
#social distancing--from Apple direction search frequency
ca_mobility_trend <- read.csv("covid-data/ca_mobility_trend.csv")
# Statewide COVID-19 Data from https://data.ca.gov/dataset/covid-19-time-series-metrics-by-county-and-state1/resource/6a1aaf21-2a2c-466b-8738-222aaceaa168
data <- read.csv("covid-data/covid19cases_test.csv")
# Adding prevalence and mortality to data
data <- data %>%
mutate(cases_per_1000= cumulative_cases/population*1000, fatality= cumulative_deaths/cumulative_cases)
#CA
cov_ca <- rgdal::readOGR("covid-data/City_and_County_Boundaries.geojson")
#pop density!
pop_density <- read.csv("covid-data/pop_density.csv")
#health capacity https://raw.githubusercontent.com/datadesk/california-coronavirus-data/master/cdph-hospital-patient-county-totals.csv
hospital <- read.csv("covid-data/hospital.csv")
#vaccination
vax <- read.csv("covid-data/covid19vaccinesbycounty.csv")
#social distancing--from Apple direction search frequency
ca_mobility_trend <- read.csv("covid-data/ca_mobility_trend.csv")
ca_mobility_trend$date <- as_date(ca_mobility_trend$date)
??getData()
#annual average max temperature! from cal-adapt
maxTemp <- raster("covid-data/tmmax_year_avg_2020.tif")
#annual average max temperature! from cal-adapt
maxTemp <- raster("covid-data/tmmx_year_avg_2020.tif")
??crop
??mask
ca_maxTemp <- raster::crop(x=maxTemp, y=cov_ca)
ca_maxTemp_mask <- raster::mask(x=ca_maxTemp, y= cov_ca)
ca_maxTemp_mask <- raster::mask(x=ca_maxTemp, y= cov_ca)
library(raster)
ca_maxTemp_mask <- raster::mask(x=ca_maxTemp, y= cov_ca)
View(ca_maxTemp)
ca_elev <- raster::crop(x=elev, y=cov_ca)
#elevation
elev <- raster::getData(name="alt", country="USA")
ca_elev <- raster::crop(x=elev, y=cov_ca)
View(elev)
ca_elev <- raster::crop(x=elev[1], y=cov_ca)
ca_elev <- raster::crop(x=elev[1], y=cov_ca)
elev[1]
usa<-elev[1]
ca_elev <- raster::crop(x=usa, y=cov_ca)
View(usa)
usa<-elev[1]$`C:/Users/Neil Liu/Desktop/summer project/Covid-CA/USA1_msk_alt.grd`
ca_elev <- raster::crop(x=usa, y=cov_ca)
ca_elev_mask <- raster::mask(ca_elev, y=cov_ca)
#loading libraries
library(tidyverse)
library(dplyr)
library(leaflet)
library(sp)
library(rgdal)
library(raster)
library(lubridate)
ca_elev_mask <- raster::mask(ca_elev, y=cov_ca)
elev[["C:/Users/Neil Liu/Desktop/summer project/Covid-CA/USA1_msk_alt.grd"]]
View(ca_elev)
ca_elev_mask <- raster::mask(x=ca_elev, y=cov_ca)
??crop()
plot(ca_elev)
ca_elev_mask <- raster::mask(x=ca_elev, y=cov_ca)
#loading libraries
library(tidyverse)
library(dplyr)
library(leaflet)
library(sp)
library(rgdal)
library(raster)
library(lubridate)
summary(cov_ca)
summary(ca_maxTemp)
ca_maxTemp
cov_ca
ca_maxTemp_mask <- raster::mask(x=ca_maxTemp, y= cov_ca)
plot(ca_maxTemp)
#annual average min temperature
minTemp <- raster("covid-data/tmmin_year_average_2020.tif")
minTemp
ca_elev_mask <- raster::mask(x=ca_elev, y=cov_ca)
??raster::mask
#loading libraries
library(tidyverse)
library(dplyr)
library(leaflet)
library(sp)
library(rgdal)
library(raster)
library(lubridate)
ca_elev_mask <- raster::mask(x=ca_elev, y=cov_ca)
#CA Boundaries from ca.gov
CA_state_boundary <-readOGR("covid-data/CA_State_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <-readOGR("covid-data/CA_State_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR("covid-data/CA_State_TIGER2016.shp")
??readOGR()
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR("./","covid-data/CA_State_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR("CA_State_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR("CA_State_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR(dsn=.,"CA_State_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR(dsn="./","CA_State_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR("CA_State_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR(dsn="CA_State_TIGER2016.shp")
setwd("C:/Users/Neil Liu/Desktop/summer project/Covid-CA")
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR(dsn="CA_State_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR(dsn="CA_Counties_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR("CA_Counties_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR(".","CA_Counties_TIGER2016")
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR(".","CA_State_TIGER2016")
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR("./CA_State_TIGER2016.shp",".")
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR("./CA_State_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <-rgdal::readOGR(dsn="./CA_State_TIGER2016.shp",layer="State")
??shapefile
#CA Boundaries from ca.gov
CA_state_boundary <- shapefile("CA_State_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <- shapefile("./CA_State_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <- shapefile("./CA_State_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <- shapefile(".",layer="CA_State_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <- shapefile(dsn=".",layer="CA_State_TIGER2016.shp")
#CA Boundaries from ca.gov
CA_state_boundary <- shapefile(dsn=".",layer="CA_State_TIGER2016")
#CA Boundaries from ca.gov
CA_state_boundary <- readOGR(dsn=".",layer="CA_State_TIGER2016")
ca_elev <- raster::crop(x=usa, y=CA_state_boundary)
plot(CA_state_boundary)
ca_elev <- raster::crop(x=usa, y=CA_state_boundary)
usa<-elev[1]$`C:/Users/Neil Liu/Desktop/summer project/Covid-CA/USA1_msk_alt.grd`
ca_elev <- raster::crop(x=usa, y=CA_state_boundary)
CA_state_boundary
CA_state_boundary <-spTransform(CA_state_boundary, crs(maxTemp))
ca_elev_mask <- raster::mask(x=ca_elev, y=CA_state_boundary)
ca_elev_mask <- raster::mask(x=ca_elev, mask=CA_state_boundary)
ca_elev_mask <- raster::mask(x=ca_elev, CA_state_boundary)
plot(ca_elev_mask)
ca_maxTemp_mask <-raster::mask(x=ca_maxTemp, mask=CA_state_boundary)
plot(ca_maxTemp_mask)
ca_minTemp_mask <- raster::mask(x=ca_minTemp, mask=CA_state_boundary)
ca_minTemp <- raster::crop(x=minTemp, y=CA_state_boundary)
ca_minTemp_mask <- raster::mask(x=ca_minTemp, mask=CA_state_boundary)
plot(ca_minTemp_mask)
ca_rainfall <- raster::crop(x=rainfall, y=CA_state_boundary)
ca_fainfall_mask <- raster::crop(x=ca_rainfall, mask=CA_state_boundary)
#annual precipitation!
rainfall <- raster("covid-data/pr_year_average_2020.tif")
ca_rainfall <- raster::crop(x=rainfall, y=CA_state_boundary)
ca_fainfall_mask <- raster::crop(x=ca_rainfall, mask=CA_state_boundary)
#annual precipitation!
rainfall <- raster("covid-data/pr_year_average_2020.tif")
ca_rainfall <- raster::crop(x=rainfall, y=CA_state_boundary)
ca_fainfall_mask <- raster::crop(x=ca_rainfall, mask=CA_state_boundary)
ca_fainfall_mask <- raster::mask(x=ca_rainfall, mask=CA_state_boundary)
plot(ca_rainfall_mask)
#annual precipitation!
rainfall <- raster("covid-data/pr_year_average_2020.tif")
ca_rainfall <- raster::crop(x=rainfall, y=CA_state_boundary)
ca_fainfall_mask <- raster::mask(x=ca_rainfall, mask=CA_state_boundary)
ca_rainfall_mask <- raster::mask(x=ca_rainfall, mask=CA_state_boundary)
plot(ca_rainfall_mask)
#health coverage
travel_time<- raster("covid-data/motorized_travel_time_to_healthcare.geotiff")
ca_travel_time <- raster::crop(x=travel_time, y=CA_state_boundary)
ca_travel_time_mask <- raster::mask(x=ca_travel_time, mask=CA_state_boundary)
plot(ca_travel_time_mask)
ca_travel_time_mask
#night light(development level)
night_light <- raster("covid-data/usa_viirs_100m_2016.tif")
ca_night_light <-raster::crop(x=night_light, y=CA_state_boundary)
ca_night_light_mask <-raster::mask(x=ca_night_light, mask=CA_state_boundary)
??resample
plot(ca_night_light_mask)
View(pop_density)
View(vax)
View(ca_mobility_trend)
#social distancing--from Apple--direction search frequency
ca_mobility_trend <- read.csv("covid-data/ca_mobility_trend.csv")
View(ca_mobility_trend)
ca_mobility_trend
str(ca_mobility_trend)
ca_mobility_trend$date <- as.Date.character(ca_mobility_trend$date)
ca_mobility_trend$date <- as.Date(ca_mobility_trend$date)
ca_mobility_trend$date <- as_date(ca_mobility_trend$date)
#poverty rate according to California measure from PPIC
poverty <- read.csv("covid-data/ poverty-across-california.csv")
#poverty rate according to California measure from PPIC
poverty <- read.csv("covid-data/poverty-across-california.csv")
View(poverty)
#social distancing--from Apple--direction search frequency
ca_mobility_trend <- read.csv("covid-data/ca_mobility_trend.csv")
str(ca_mobility_trend)
ca_mobility_trend$date <- as_date(ca_mobility_trend$date)
as_date()
?as_date
#social distancing--from Apple--direction search frequency
ca_mobility_trend <- read.csv("covid-data/ca_mobility_trend.csv")
#loading libraries
library(tidyverse)
library(dplyr)
library(leaflet)
library(sp)
library(rgdal)
library(raster)
library(lubridate)
?left()
#join dataframes
cov_data <- data %>%
left_join(ca_mobility_trend)
#loading libraries
library(tidyverse)
library(dplyr)
library(leaflet)
library(sp)
library(rgdal)
library(raster)
library(lubridate)
#join dataframes
cov_data <- data %>%
left_join(ca_mobility_trend)
View(cov_data)
#join dataframes
ca_mobility_trend$X <-NULL
cov_data <- data %>%
left_join(ca_mobility_trend)
View(cov_data)
View(hospital)
hospital <- hospital %>%
mutate(icu_occupancy= (icu_positive_patients+icu_suspected_patients)/(icu_available_beds+icu_positive_patients+icu_suspected_patients)) %>%
select(region, date, icu_occupancy)
View(hospital)
View(vax)
vax <- vax %>%
select(region, administered_date, cumulative_fully_vaccinated)
View(vax)
View(poverty)
poverty <- poverty %>%
select(region, Rate)
View(data)
cov_data <- data %>%
left_join(ca_mobility_trend) %>%
left_join(hospital)
View(cov_data)
View(vax)
#fully vaccinated population 12/15
vax <- read.csv("covid-data/covid19vaccinesbycounty.csv")
vax <- vax %>%
select(region, administered_date, cumulative_fully_vaccinated)
View(vax)
cov_data <- data %>%
left_join(ca_mobility_trend) %>%
left_join(hospital) %>%
left_join(vax)
#fully vaccinated population 12/15
vax <- read.csv("covid-data/covid19vaccinesbycounty.csv")
vax <- vax %>%
select(region, date, cumulative_fully_vaccinated)
cov_data <- data %>%
left_join(ca_mobility_trend) %>%
left_join(hospital) %>%
left_join(vax)
View(cov_data)
#loading libraries
library(tidyverse)
library(dplyr)
library(leaflet)
library(sp)
library(rgdal)
library(raster)
library(lubridate)
#health coverage(unit min) resolution 0.008
#travel_time<- raster("covid-data/motorized_travel_time_to_healthcare.geotiff")
#ca_travel_time <- raster::crop(x=travel_time, y=CA_state_boundary)
#ca_travel_time_mask <- raster::mask(x=ca_travel_time, mask=CA_state_boundary)
writeRaster(ca_travel_time_mask,"ca_travel_time_to_healthcare.tif")
ca_travel_time_mask <-raster("ca_travel_time_to_healthcare.tif")
ca_travel_time_mask <-raster("covid-data/ca_travel_time_to_healthcare.tif")
writeRaster(ca_night_light_mask,"ca_night_light.tif")
writeRaster(ca_night_light_mask,"ca_night_light.tif")
#loading libraries
library(tidyverse)
library(dplyr)
library(leaflet)
library(sp)
library(rgdal)
library(raster)
library(lubridate)
writeRaster(ca_night_light_mask,"ca_night_light.tif")
ca_night_light_mask
ca_travel_time_mask
View(ca_mobility_trend)
View(data)
#match resolution for raster objects
ca_elev_mask <- resample(ca_elev_mask,ca_maxTemp_mask, method="bilinear")
ca_travel_time_mask <-resample(ca_travel_time_mask,ca_maxTemp_mask, method="bilinear")
ca_night_light_mask <- resample(ca_night_light_mask, ca_maxTemp_mask, method="bilinear")
writeRaster(ca_night_light_mask,"ca_night_light.tif")
#night light(development level) resolution 0.0008
night_light <- raster("covid-data/usa_viirs_100m_2016.tif")
ca_night_light <-raster::crop(x=night_light, y=CA_state_boundary)
ca_night_light_mask <-raster::mask(x=ca_night_light, mask=CA_state_boundary)
writeRaster(ca_night_light_mask,"ca_night_light.tif")
View(cov_data)
#match resolution for raster objects
ca_elev_mask <- resample(ca_elev_mask,ca_maxTemp_mask, method="bilinear")
ca_travel_time_mask <-resample(ca_travel_time_mask,ca_maxTemp_mask, method="bilinear")
ca_night_light_mask <- resample(ca_night_light_mask, ca_maxTemp_mask, method="bilinear")
cov_ca$ppt <- raster::extract(ca_rainfall_mask, cov_ca, fun=mean, na.rm=TRUE)
cov_ca$mxTemp <- raster::extract(ca_maxTemp_mask, cov_ca, fun=mean, na.rm=TRUE)
cov_ca$minTemp <-raster::extract(ca_minTemp_mask, cov_ca, fun=mean, na.rm=TRUE)
cov_ca$elevation <-raster::extract(ca_elev_mask, cov_ca, fun=mean, na.rm=TRUE)
cov_ca$travel_time <-raster::extract(ca_travel_time_mask, cov_ca, fun=mean, na.rm=TRUE)
cov_ca$night_light <-raster::extract(ca_night_light_mask, cov_ca, fun=mean, na.rm=TRUE)
View(cov_ca)
View(cov_ca@data)
#loading libraries
library(tidyverse)
library(dplyr)
library(leaflet)
library(sp)
library(rgdal)
library(raster)
library(lubridate)
ca_night_light_mask
#night_light <- raster("covid-data/usa_viirs_100m_2016.tif")
#ca_night_light <-raster::crop(x=night_light, y=CA_state_boundary)
#ca_night_light_mask <-raster::mask(x=ca_night_light, mask=CA_state_boundary)
writeRaster(ca_night_light_mask,"ca_night_light.tif")
